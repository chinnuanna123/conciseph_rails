<div class="content-wrapper">
   <div class="content-header">
      <div class="container-fluid">
         <div class="row mb-2">
            <div class="col-sm-6">
               <h1 class="m-0 text-dark">QI Goal Details</h1>
            </div>
            <!-- /.col -->
            <div class="col-sm-6">
               <ol class="breadcrumb float-sm-right">
                  <li class="breadcrumb-item"><a href="<%= root_path%>">Home</a></li>
                  <li class="breadcrumb-item active">QI Goal Details</li>
               </ol>
            </div>
         </div>
      </div>
   </div>
   <section class="content">
      <div class="card">
         <div class="card-body">
            <div class="row">
               <div class="col-12 col-md-6 col-lg-6">
                  <h3 class="text-primary"><i class="fas fa-paint-brush"></i> Aug23WellChildVisits</h3>
                  <br/>
                  <div class="row">
                     <div class="col-6 text-muted text-sm mt-5">
                        Category
                        <b class="d-block text-danger">Well Child Care</b>
                     </div>
                     <div class="col-6 text-muted text-sm  mt-5">
                        Status
                        <b class="d-block text-danger">In Progress</b>
                     </div>
                     <div class="col-6 text-muted text-sm  mt-5">
                        Start Date
                        <b class="d-block text-danger">01 Aug 2023</b>
                     </div>
                     <div class="col-6 text-muted text-sm  mt-5">
                        End Date
                        <b class="d-block text-danger">15 Sept 2023</b>
                     </div>
                  </div>
               </div>
               <div class="col-12 col-md-6 col-lg-6 ">
                  <div class="row">
                     <div class="col-6">
                        <div>
                           <canvas id="outreach"></canvas>
                        </div>
                        <div class="text-center">
                            <b>Outreach Success</b>
                        </div>
                     </div>
                     <div class="col-6">
                        <div>
                           <canvas id="completion"></canvas>
                        </div>
                        <div class="text-center">
                            <b>Completion Success</b>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </section>
   <section class="content">
      <div class="container-fluid">
         <div class="row d-flex justify-content-center">
            <div class="col-lg-4 col-6">
               <a href="#" style="color: white">
                  <div class="small-box bg-info">
                     <div class="inner">
                        <h3>0</h3>
                        <p>
                           Not Started
                        </p>
                     </div>
                     <div class="icon">
                        <i class="ion ion-bag"></i>
                     </div>
                  </div>
               </a>
            </div>
            <div class="col-lg-4 col-6">
               <a href="#" style="color: white">
                  <div class="small-box bg-warning">
                     <div class="inner">
                        <h3>734</h3>
                        <p>In Progress</p>
                     </div>
                     <div class="icon">
                        <i class="ion ion-stats-bars"></i>
                     </div>
                  </div>
               </a>
            </div>
            <div class="col-lg-4 col-6">
               <a href="#" style="color: white">
                  <div class="small-box bg-success">
                     <div class="inner">
                        <h3>8222</h3>
                        <p>Completed </p>
                     </div>
                     <div class="icon">
                        <i class="ion ion-person-add"></i>
                     </div>
                  </div>
               </a>
            </div>
         </div>
         <div class="row">
            <div class="col-lg-12">
               <div class="card">
                  <div class="card-body table-responsive p-0">
                     <table class="table table-striped table-valign-middle">
                        <thead>
                           <tr>
                              <th>Member Name</th>
                              <th>Status</th>
                              <th>Acknowledge By</th>
                              <th>Last Action Taken</th>
                           </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <a href="#" class="provider-name-td" data-value="first">
                                     Maria Hernandez
                                    </a>
                                   
                                </td>
                                <td>
                                    Completed
                                </td>
                                <td>
                                    02 Aug 2023
                                </td>
                                <td>
                                   <%= Time.now.strftime(' %d %b %Y ') %>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <a href="#" class="provider-name-td" data-value="second">
                                    Mike Smith
                                    </a>
                                </td>
                                <td>
                                    In Progress
                                </td>
                                <td>
                                    01 Aug 2023
                                </td>
                                <td>
                                    12 Aug 2023
                                </td>
                            </tr>
                           <% 100.times do |index| %>
                           <tr>
                              <td>
                                 <a href="#">
                                    <%= fake_user_name  %>
                                 </a>
                                 
                              </td>
                              <td>
                                <%= ["Completed", "In Progress"].sample %>
                              </td>
                              <td>
                                 <%= ["01 Aug 2023", "02 Aug 2023", '03 Aug 2023'].sample%>
                              </td>
                              <td>
                                 <%= ["09 Aug 2023", "10 Aug 2023", '11 Aug 2023'].sample%>
                              </td>
                              
                           </tr>
                           <% end %>
                        </tbody>
                     </table>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </section>
</div>

<div class="modal fade hide" id="modal-default" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-body">
        <div class="card" id="data-to-append">
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary close-modal pull-right">Close</button>
      </div>
    </div>
  </div>
</div>
<div class="modal-backdrop fade hide" style="display: none"></div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
   const ctx = document.getElementById('outreach');
     const data = {
     labels: [
         'Outreach (100%)'
     ],
     indexLabelPlacement: "bottom",
     datasets: [{
         label: 'Outreach',
         data: [8956,0],
         backgroundColor: [
             'rgb(105,168,79)'
         ],
         hoverOffset: 4
     }]
     };
   new Chart(ctx, {
     type: 'doughnut',
     data: data}
     );
   
     const completion_chart = document.getElementById('completion');
   
     const c_data = {
         labels: [
             'Completion Rate (91.8%)',
             ''
         ],
        indexLabelPlacement: "bottom",
         datasets: [{
             label: '',
             data: [8222,734],
             backgroundColor: [
                 'rgb(105,168,79)',
                 'rgb(183,183,183)'
             ],
             hoverOffset: 4
         }]
     };
   new Chart(completion_chart, {
         type: 'doughnut',
         data: c_data}
     );
</script>
<script>
     $(function(){
      $(".modal-header .close, .modal-footer .close-modal").unbind('click').bind('click', function(){
         hideModal()
      });
      
      function showModal(){
          $("#modal-default, .modal-backdrop").removeClass('hide').addClass('show')
           .attr('role', 'dialog')
           .css('display', 'block')
      }

      function hideModal(){
            $("#data-to-append").html('')
           $("#modal-default, .modal-backdrop").addClass('hide').removeClass('show')
           .removeAttr('role')
           .css('display', 'none')
           
      }
      $(".provider-name-td").unbind('click').bind('click', function(e){
         e.preventDefault();
         var selected =$(this).attr('data-value')
         var firstRecordDetails = '<div class="card-body box-profile"></div><h3 class="profile-username text-center" >Maria Hernandez</h3><p class="text-muted text-center">Overall Status: <span class="text-success">Completed</span></p><div class="row p-0 m-0"><div class="col-4 text-muted text-sm mt-2">Gender<b class="d-block">Female</b></div><div class="col-4 text-muted text-sm  mt-2">Gender on Birth Certificate<b class="d-block">Female</b></div><div class="col-4 text-muted text-sm  mt-2">Ethinicity<b class="d-block">Hispanic</b></div><div class="col-4 text-muted text-sm  mt-2">Language<b class="d-block">Spanish</b></div><div class="col-4 text-muted text-sm  mt-2">Last Mobile App Usage<b class="d-block">18 Aug 2023 12:30PM</b></div></div><table class="mt-3 table table-striped table-valign-middle" style="height: 200px; overflow-y: auto"><thead><tr><th>Action Name</th><th>Action Status</th><th>Last Action Taken On</th></tr></thead><tbody><tr><td>Intro Message</td><td class="text-success">Completed</td><td>02 Aug 2023</td></tr><tr><td>Well Child Care Info Flyer</td><td class="text-success">Completed</td><td>02 Aug 2023</td></tr><tr><td>Schedule an appointment</td><td class="text-success">Completed</td><td>02 Aug 2023</td></tr><tr><td>Create Calendar Reminder</td><td class="text-success">Completed</td><td>02 Aug 2023</td></tr><tr><td>Member Self Declaration of Completion</td><td class="text-success">Completed</td><td>18 Aug 2023</td></tr><tr><td>Thank you note</td><td class="text-success">Completed</td><td>18 Aug 2023</td></tr><tr><td>Well Child Care Feedback</td><td class="text-success">Completed</td><td>18 Aug 2023</td></tr></tbody></table></div>'

         var secondRecordDetails = '<div class="card-body box-profile"><h3 class="profile-username text-center" >Mike Smith</h3><p class="text-muted text-center">Overall Status: <span class="text-danger">In Progress</span></p><div class="row p-0 m-0"><div class="col-4 text-muted text-sm mt-2">Gender<b class="d-block">Male</b></div><div class="col-4 text-muted text-sm  mt-2">Gender on Birth Certificate<b class="d-block">Male</b></div><div class="col-4 text-muted text-sm  mt-2">Ethinicity<b class="d-block">White</b></div><div class="col-4 text-muted text-sm  mt-2">Language<b class="d-block">English</b></div><div class="col-4 text-muted text-sm  mt-2">Last Mobile App Usage<b class="d-block">08 Aug 2023 06:30PM</b></div></div><table class="mt-3 table table-striped table-valign-middle" style="height: 200px; overflow-y: auto"><thead><tr><th>Action Name</th><th>Action Status</th><th>Last Action Taken On</th></tr></thead><tbody><tr><td>Intro Message</td><td class="text-success">Completed</td><td>02 Aug 2023</td></tr><tr><td>Well Child Care Info Flyer</td><td class="text-success">Completed</td><td>02 Aug 2023</td></tr><tr><td>Schedule an appointment</td><td class="text-success">Completed</td><td>02 Aug 2023</td></tr><tr><td>Create Calendar Reminder</td><td class="text-success">Completed</td><td>02 Aug 2023</td></tr><tr><td>Member Self Declaration of Completion</td><td class="text-danger">In Progress</td><td>08 Aug 2023</td></tr><tr><td>Thank you note</td><td>Not Started</td><td></td></tr><tr><td>Well Child Care Feedback</td><td>Not Started</td><td></td></tr></tbody></table></div>'
         console.log(selected)
         if(selected === 'first'){
            $("#data-to-append").html(firstRecordDetails)
            
         }else{
            $("#data-to-append").html(secondRecordDetails)
         }
         
         showModal()
      })
     })
</script>